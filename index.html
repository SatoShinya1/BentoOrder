<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>弁当・単品注文書</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        select, button {
            padding: 10px;
            font-size: 1em;
            margin: 5px 0;
            width: 100%;
        }
        .total {
            font-weight: bold;
        }
        .copy-button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
        }
        .copy-button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>弁当・単品注文書</h1>
    <h2>弁当メニュー</h2>
    <form id="orderForm">
        <table>
            <thead>
                <tr>
                    <th>弁当の種類</th>
                    <th>価格</th>
                    <th>ごはん</th>
                    <th>個数</th>
                </tr>
            </thead>
            <tbody id="bentoMenu">
                <!-- 弁当メニューをここに動的に生成 -->
            </tbody>
        </table>

        <h2>単品メニュー</h2>
        <table>
            <thead>
                <tr>
                    <th>単品の種類</th>
                    <th>価格</th>
                    <th>個数</th>
                </tr>
            </thead>
            <tbody id="singleMenu">
                <!-- 単品メニューをここに動的に生成 -->
            </tbody>
        </table>

        <div>
            <p>全体の個数: <span id="totalQuantity">0</span> 個</p>
            <p>合計金額: <span id="totalAmount">0</span> 円</p>
        </div>
        <button type="button" class="copy-button" onclick="copyToClipboard()">選択内容をコピー</button>
    </form>

    <script>
        const bentoMenu = [
            { name: 'チキン弁当', price: 500 },
            { name: 'ハンバーグ弁当', price: 600 },
            { name: '鮭弁当', price: 550 },
            // 他の弁当メニュー追加 (全21種類)
        ];

        const singleMenu = [
            { name: '唐揚げ', price: 300 },
            { name: 'コロッケ', price: 200 },
            { name: '卵焼き', price: 150 },
            // 他の単品メニュー追加 (全7種類)
        ];

        function createBentoRow(bento) {
            const row = document.createElement('tr');
            const riceOptions = `
                <select class="rice">
                    <option value="0">普通</option>
                    <option value="50">大盛 (+50円)</option>
                </select>
            `;
            row.innerHTML = `
                <td>${bento.name}</td>
                <td>${bento.price}円</td>
                <td>${riceOptions}</td>
                <td>
                    <select class="quantity">
                        ${Array.from({ length: 10 }, (_, i) => `<option value="${i}">${i}</option>`).join('')}
                    </select>
                </td>
            `;
            return row;
        }

        function createSingleRow(single) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${single.name}</td>
                <td>${single.price}円</td>
                <td>
                    <select class="quantity">
                        ${Array.from({ length: 10 }, (_, i) => `<option value="${i}">${i}</option>`).join('')}
                    </select>
                </td>
            `;
            return row;
        }

        function updateTotals() {
            let totalQuantity = 0;
            let totalAmount = 0;

            // 弁当メニュー
            document.querySelectorAll('#bentoMenu tr').forEach(row => {
                const price = parseInt(row.cells[1].innerText);
                const rice = parseInt(row.querySelector('.rice').value);
                const qty = parseInt(row.querySelector('.quantity').value);
                totalQuantity += qty;
                totalAmount += (price + rice) * qty;
            });

            // 単品メニュー
            document.querySelectorAll('#singleMenu tr').forEach(row => {
                const price = parseInt(row.cells[1].innerText);
                const qty = parseInt(row.querySelector('.quantity').value);
                totalQuantity += qty;
                totalAmount += price * qty;
            });

            document.getElementById('totalQuantity').innerText = totalQuantity;
            document.getElementById('totalAmount').innerText = totalAmount;
        }

        function copyToClipboard() {
            let copyText = "注文内容:\n";
            
            // 弁当メニュー
            document.querySelectorAll('#bentoMenu tr').forEach(row => {
                const name = row.cells[0].innerText;
                const rice = row.querySelector('.rice').selectedOptions[0].innerText;
                const qty = row.querySelector('.quantity').value;
                if (qty > 0) {
                    copyText += `${name} - ごはん: ${rice}, ${qty}個\n`;
                }
            });

            // 単品メニュー
            document.querySelectorAll('#singleMenu tr').forEach(row => {
                const name = row.cells[0].innerText;
                const qty = row.querySelector('.quantity').value;
                if (qty > 0) {
                    copyText += `${name} - ${qty}個\n`;
                }
            });

            copyText += `\n全体の個数: ${document.getElementById('totalQuantity').innerText}個`;
            copyText += `\n合計金額: ${document.getElementById('totalAmount').innerText}円`;

            navigator.clipboard.writeText(copyText).then(() => {
                alert('注文内容をクリップボードにコピーしました。');
            }).catch(err => {
                alert('コピーに失敗しました: ' + err);
            });
        }

        // ページが読み込まれた時に弁当と単品のメニューを生成
        const bentoMenuContainer = document.getElementById('bentoMenu');
        bentoMenu.forEach(bento => {
            const row = createBentoRow(bento);
            bentoMenuContainer.appendChild(row);
        });

        const singleMenuContainer = document.getElementById('singleMenu');
        singleMenu.forEach(single => {
            const row = createSingleRow(single);
            singleMenuContainer.appendChild(row);
        });

        // 入力が変わった時に合計を更新
        document.querySelectorAll('select').forEach(select => {
            select.addEventListener('change', updateTotals);
        });

        updateTotals(); // 初期合計の更新
    </script>
</body>
</html>
